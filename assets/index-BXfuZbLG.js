var ie=Object.defineProperty;var le=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>le(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function p(){}function Q(t){return t()}function R(){return Object.create(null)}function A(t){t.forEach(Q)}function Z(t){return typeof t=="function"}function L(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let I;function N(t,e){return t===e?!0:(I||(I=document.createElement("a")),I.href=e,t===I.href)}function se(t){return Object.keys(t).length===0}function O(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function ue(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function ee(){return U(" ")}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ce(t){return Array.from(t.childNodes)}function fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function T(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let M;function P(t){M=t}function ae(){if(!M)throw new Error("Function called outside component initialization");return M}function te(t){ae().$$.on_mount.push(t)}const y=[],W=[];let v=[];const z=[],de=Promise.resolve();let F=!1;function he(){F||(F=!0,de.then(ne))}function q(t){v.push(t)}const j=new Set;let w=0;function ne(){if(w!==0)return;const t=M;do{try{for(;w<y.length;){const e=y[w];w++,P(e),pe(e.$$)}}catch(e){throw y.length=0,w=0,e}for(P(null),y.length=0,w=0;W.length;)W.pop()();for(let e=0;e<v.length;e+=1){const n=v[e];j.has(n)||(j.add(n),n())}v.length=0}while(y.length);for(;z.length;)z.pop()();F=!1,j.clear(),P(t)}function pe(t){if(t.fragment!==null){t.update(),A(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}function me(t){const e=[],n=[];v.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),v=e}const S=new Set;let $;function _e(){$={r:0,c:[],p:$}}function ge(){$.r||A($.c),$=$.p}function E(t,e){t&&t.i&&(S.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),$.c.push(()=>{S.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function G(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Y(t){t&&t.c()}function H(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),q(()=>{const i=t.$$.on_mount.map(Q).filter(Z);t.$$.on_destroy?t.$$.on_destroy.push(...i):A(i),t.$$.on_mount=[]}),o.forEach(q)}function B(t,e){const n=t.$$;n.fragment!==null&&(me(n.after_update),A(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function be(t,e){t.$$.dirty[0]===-1&&(y.push(t),he(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function x(t,e,n,r,o,i,l=null,c=[-1]){const s=M;P(t);const u=t.$$={fragment:null,ctx:[],props:i,update:p,not_equal:o,bound:R(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:R(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(a,m,...b)=>{const C=b.length?b[0]:m;return u.ctx&&o(u.ctx[a],u.ctx[a]=C)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](C),f&&be(t,a)),m}):[],u.update(),f=!0,A(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const a=ce(e.target);u.fragment&&u.fragment.l(a),a.forEach(h)}else u.fragment&&u.fragment.c();e.intro&&E(t.$$.fragment),H(t,e.target,e.anchor),ne()}P(s)}class D{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){B(this,1),this.$destroy=p}$on(e,n){if(!Z(n))return p;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!se(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $e="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($e);function J(t,e,n){const r=t.slice();return r[4]=e[n],r}function K(t){let e,n,r,o,i,l,c;return{c(){e=g("a"),n=g("img"),i=ee(),d(n,"class","thumbnail svelte-buvq0y"),N(n.src,r=t[4].url)||d(n,"src",r),d(n,"alt",o="Thumbnail "+t[4].id),d(e,"id",l=`thumbnail-${t[4].id}`),d(e,"class","thumbnail-wrapper svelte-buvq0y"),d(e,"href",c=`/photos-blog?photo=${t[4].id}`),T(e,"left",t[4].posX+"px"),T(e,"top",t[4].posY+"px")},m(s,u){_(s,e,u),O(e,n),O(e,i)},p(s,u){u&1&&!N(n.src,r=s[4].url)&&d(n,"src",r),u&1&&o!==(o="Thumbnail "+s[4].id)&&d(n,"alt",o),u&1&&l!==(l=`thumbnail-${s[4].id}`)&&d(e,"id",l),u&1&&c!==(c=`/photos-blog?photo=${s[4].id}`)&&d(e,"href",c),u&1&&T(e,"left",s[4].posX+"px"),u&1&&T(e,"top",s[4].posY+"px")},d(s){s&&h(e)}}}function we(t){let e,n=G(t[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=K(J(t,n,o));return{c(){e=g("div");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,i){_(o,e,i);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(o,[i]){if(i&1){n=G(o[0]);let l;for(l=0;l<n.length;l+=1){const c=J(o,n,l);r[l]?r[l].p(c,i):(r[l]=K(c),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:p,o:p,d(o){o&&h(e),ue(r,o)}}}const ye=5,ve=250,Ee=250,V=30;function Ce(t,e){return{posX:Math.floor(Math.random()*t),posY:Math.floor(Math.random()*e)}}function Pe(t,e,n,r){const o=ve+V,i=Ee+V;return!(t+o<=n||n+o<=t||e+i<=r||r+i<=e)}function Me(t,e,n){let{pageStart:r}=e,o=[];te(async()=>{await i(r,ye),l()});async function i(c,s){const u="https://rkimmiblogserver.fly.dev/api/photos-blog/thumbnails";try{let a=await(await fetch(u)).json();n(0,o=a.images.splice(0,s))}catch(f){console.error("Error loading thumbnails:",f)}finally{}}function l(){const c=window.innerWidth-250,s=window.innerHeight-250,u=[];n(0,o=o.map(f=>{let a,m,b;const C=document.getElementById(`thumbnail-${f.id}`);if(!C)throw new Error(`Cannot find elem thumbnail-${f.id} to set randomised position.`);do({posX:a,posY:m}=Ce(c,s)),b=u.some(({posX:re,posY:oe})=>Pe(a,m,re,oe));while(b);return u.push({element:C,posX:a,posY:m}),{...f,posX:a,posY:m}}))}return t.$$set=c=>{"pageStart"in c&&n(1,r=c.pageStart)},[o,r]}class ke extends D{constructor(e){super(),x(this,e,Me,we,L,{pageStart:1})}}function Ae(t){let e,n,r,o;return n=new ke({props:{pageStart:0}}),{c(){e=g("div"),Y(n.$$.fragment),r=U(`
  hello`)},m(i,l){_(i,e,l),H(n,e,null),O(e,r),o=!0},p,i(i){o||(E(n.$$.fragment,i),o=!0)},o(i){k(n.$$.fragment,i),o=!1},d(i){i&&h(e),B(n)}}}class Ie extends D{constructor(e){super(),x(this,e,null,Ae,L,{})}}function Te(t){let e;return{c(){e=g("div"),e.textContent="wip photo preview"},m(n,r){_(n,e,r)},p,d(n){n&&h(e)}}}function Se(t){let e,n=t[0].title+"",r,o,i,l,c;return{c(){e=g("h1"),r=U(n),o=ee(),i=g("img"),N(i.src,l=t[0].url)||d(i,"src",l),d(i,"alt",c=t[0].title)},m(s,u){_(s,e,u),O(e,r),_(s,o,u),_(s,i,u)},p(s,u){u&1&&n!==(n=s[0].title+"")&&fe(r,n),u&1&&!N(i.src,l=s[0].url)&&d(i,"src",l),u&1&&c!==(c=s[0].title)&&d(i,"alt",c)},d(s){s&&(h(e),h(o),h(i))}}}function Ne(t){let e;function n(i,l){return i[0]?Se:Te}let r=n(t),o=r(t);return{c(){e=g("div"),o.c()},m(i,l){_(i,e,l),o.m(e,null)},p(i,[l]){r===(r=n(i))&&o?o.p(i,l):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null)))},i:p,o:p,d(i){i&&h(e),o.d()}}}function Oe(t,e,n){let{id:r}=e,o;return te(async()=>{if(!o){const i=await fetch(`/api/photos/${r}`);n(0,o=await i.json())}}),t.$$set=i=>{"id"in i&&n(1,r=i.id)},[o,r]}class Le extends D{constructor(e){super(),x(this,e,Oe,Ne,L,{id:1})}}function He(t){let e,n;return e=new Ie({}),{c(){Y(e.$$.fragment)},m(r,o){H(e,r,o),n=!0},p,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Be(t){let e,n;return e=new Le({props:{id:t[0]}}),{c(){Y(e.$$.fragment)},m(r,o){H(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.id=r[0]),e.$set(i)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function xe(t){let e,n,r,o;const i=[Be,He],l=[];function c(s,u){var f;return(f=s[0])!=null&&f.length?0:1}return n=c(t),r=l[n]=i[n](t),{c(){e=g("main"),r.c(),d(e,"class","svelte-1tyzdic")},m(s,u){_(s,e,u),l[n].m(e,null),o=!0},p(s,[u]){let f=n;n=c(s),n===f?l[n].p(s,u):(_e(),k(l[f],1,1,()=>{l[f]=null}),ge(),r=l[n],r?r.p(s,u):(r=l[n]=i[n](s),r.c()),E(r,1),r.m(e,null))},i(s){o||(E(r),o=!0)},o(s){k(r),o=!1},d(s){s&&h(e),l[n].d()}}}function De(t,e,n){let{url:r=""}=e,{photoIdParam:o=null}=e;addEventListener("DOMContentLoaded",()=>{const c=new URLSearchParams(window.location.search);n(0,o=c.get("photo"));const s=document.getElementsByTagName("body")[0],[u,f]=l();s.style.backgroundColor=u,s.style.color=f});const i=new Map([[0,["#bd1818","white"]],[12,["#F9EDCD","brown"]],[16,["#18BD70","black"]],[20,["#A7A7F3","white"]]]);function l(){let c="",s="";const f=new Date().getHours();for(let[a,[m,b]]of i)if(f>=a)c=m,s=b;else break;return[c,s]}return t.$$set=c=>{"url"in c&&n(1,r=c.url),"photoIdParam"in c&&n(0,o=c.photoIdParam)},[o,r]}class Xe extends D{constructor(e){super(),x(this,e,De,xe,L,{url:1,photoIdParam:0})}}new Xe({target:document.getElementById("app")});
