var fe=Object.defineProperty;var ae=(t,e,n)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>ae(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function m(){}function ne(t){return t()}function K(){return Object.create(null)}function I(t){t.forEach(ne)}function re(t){return typeof t=="function"}function R(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let x;function L(t,e){return t===e?!0:(x||(x=document.createElement("a")),x.href=e,t===x.href)}function de(t){return Object.keys(t).length===0}function Y(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function he(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function oe(t){return document.createTextNode(t)}function ie(){return oe(" ")}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function me(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.data!==e&&(t.data=e)}function A(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let P;function C(t){P=t}function ge(){if(!P)throw new Error("Function called outside component initialization");return P}function le(t){ge().$$.on_mount.push(t)}const v=[],V=[];let E=[];const Q=[],_e=Promise.resolve();let q=!1;function be(){q||(q=!0,_e.then(se))}function z(t){E.push(t)}const F=new Set;let y=0;function se(){if(y!==0)return;const t=P;do{try{for(;y<v.length;){const e=v[y];y++,C(e),$e(e.$$)}}catch(e){throw v.length=0,y=0,e}for(C(null),v.length=0,y=0;V.length;)V.pop()();for(let e=0;e<E.length;e+=1){const n=E[e];F.has(n)||(F.add(n),n())}E.length=0}while(v.length);for(;Q.length;)Q.pop()();q=!1,F.clear(),C(t)}function $e(t){if(t.fragment!==null){t.update(),I(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}function we(t){const e=[],n=[];E.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),E=e}const N=new Set;let b;function ye(){b={r:0,c:[],p:b}}function ve(){b.r||I(b.c),b=b.p}function S(t,e){t&&t.i&&(N.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(N.has(t))return;N.add(t),b.c.push(()=>{N.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Z(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function U(t){t&&t.c()}function H(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),z(()=>{const i=t.$$.on_mount.map(ne).filter(re);t.$$.on_destroy?t.$$.on_destroy.push(...i):I(i),t.$$.on_mount=[]}),o.forEach(z)}function X(t,e){const n=t.$$;n.fragment!==null&&(we(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ee(t,e){t.$$.dirty[0]===-1&&(v.push(t),be(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,r,o,i,l=null,c=[-1]){const s=P;C(t);const u=t.$$={fragment:null,ctx:[],props:i,update:m,not_equal:o,bound:K(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:K(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(a,$,...w)=>{const _=w.length?w[0]:$;return u.ctx&&o(u.ctx[a],u.ctx[a]=_)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](_),f&&Ee(t,a)),$}):[],u.update(),f=!0,I(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const a=me(e.target);u.fragment&&u.fragment.l(a),a.forEach(h)}else u.fragment&&u.fragment.c();e.intro&&S(t.$$.fragment),H(t,e.target,e.anchor),se()}C(s)}class j{constructor(){D(this,"$$");D(this,"$$set")}$destroy(){X(this,1),this.$destroy=m}$on(e,n){if(!re(n))return m;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!de(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Se="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Se);function ee(t,e,n){const r=t.slice();return r[4]=e[n],r}function te(t){let e,n,r,o,i,l,c;return{c(){e=g("a"),n=g("img"),i=ie(),d(n,"class","thumbnail svelte-e3hy7u"),L(n.src,r=t[4].url)||d(n,"src",r),d(n,"alt",o="Thumbnail "+t[4].id),d(e,"id",l=`thumbnail-${t[4].id}`),d(e,"href",c=t[4].url),d(e,"class","thumbnail-wrapper svelte-e3hy7u"),A(e,"left",t[4].posX+"px"),A(e,"top",t[4].posY+"px")},m(s,u){p(s,e,u),Y(e,n),Y(e,i)},p(s,u){u&1&&!L(n.src,r=s[4].url)&&d(n,"src",r),u&1&&o!==(o="Thumbnail "+s[4].id)&&d(n,"alt",o),u&1&&l!==(l=`thumbnail-${s[4].id}`)&&d(e,"id",l),u&1&&c!==(c=s[4].url)&&d(e,"href",c),u&1&&A(e,"left",s[4].posX+"px"),u&1&&A(e,"top",s[4].posY+"px")},d(s){s&&h(e)}}}function Ce(t){let e,n=Z(t[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=te(ee(t,n,o));return{c(){e=g("div");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,i){p(o,e,i);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(o,[i]){if(i&1){n=Z(o[0]);let l;for(l=0;l<n.length;l+=1){const c=ee(o,n,l);r[l]?r[l].p(c,i):(r[l]=te(c),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:m,o:m,d(o){o&&h(e),he(r,o)}}}const Pe=5,O=30;function ke(t,e){return{posX:Math.floor(Math.random()*t),posY:Math.floor(Math.random()*e)}}function Ie(t,e,n,r,o,i){return!(t+(o+O)<=n||n+(o+O)<=t||e+(i+O)<=r||r+(i+O)<=e)}function Me(){const t=document.querySelector(".thumbnail");if(!t)return{maxWidth:100,maxHeight:100};const e=window.getComputedStyle(t),n=parseInt(e.maxWidth)||100,r=parseInt(e.maxHeight)||100;return{maxWidth:n,maxHeight:r}}function Te(t,e,n){let{pageStart:r}=e,o=[];le(async()=>{await i(r,Pe),n(0,o=l()),console.log(o.length)});async function i(c,s){const u="https://rkimmiblogserver.fly.dev/api/photos-blog/thumbnails";try{let a=await(await fetch(u)).json();n(0,o=a.images.splice(0,s)),console.log("got images from cloudinary")}catch(f){console.error("Error loading thumbnails:",f)}}function l(){const s=window.innerWidth-250,u=window.innerHeight-250,f=[],a=[],{maxWidth:$,maxHeight:w}=Me();return o.forEach(_=>{let M,T,G;const J=document.getElementById(`thumbnail-${_.id}`);if(!J)throw new Error(`Cannot find elem thumbnail-${_.id} to set randomised position.`);let W=0;do({posX:M,posY:T}=ke(s,u)),G=f.some(({posX:ue,posY:ce})=>Ie(M,T,ue,ce,$,w)),W++;while(G&&W<50);if(f.push({element:J,posX:M,posY:T}),W>=50){console.warn(`Skipping thumbnail ${_.id} due to space constraints.`);return}a.push({..._,posX:M,posY:T})}),a}return t.$$set=c=>{"pageStart"in c&&n(1,r=c.pageStart)},[o,r]}class xe extends j{constructor(e){super(),B(this,e,Te,Ce,R,{pageStart:1})}}function Ae(t){let e,n,r;return n=new xe({props:{pageStart:0}}),{c(){e=g("div"),U(n.$$.fragment)},m(o,i){p(o,e,i),H(n,e,null),r=!0},p:m,i(o){r||(S(n.$$.fragment,o),r=!0)},o(o){k(n.$$.fragment,o),r=!1},d(o){o&&h(e),X(n)}}}class Oe extends j{constructor(e){super(),B(this,e,null,Ae,R,{})}}function Ne(t){let e;return{c(){e=g("div"),e.textContent="wip photo preview"},m(n,r){p(n,e,r)},p:m,d(n){n&&h(e)}}}function Le(t){let e,n=t[0].title+"",r,o,i,l,c;return{c(){e=g("h1"),r=oe(n),o=ie(),i=g("img"),L(i.src,l=t[0].url)||d(i,"src",l),d(i,"alt",c=t[0].title)},m(s,u){p(s,e,u),Y(e,r),p(s,o,u),p(s,i,u)},p(s,u){u&1&&n!==(n=s[0].title+"")&&pe(r,n),u&1&&!L(i.src,l=s[0].url)&&d(i,"src",l),u&1&&c!==(c=s[0].title)&&d(i,"alt",c)},d(s){s&&(h(e),h(o),h(i))}}}function Re(t){let e;function n(i,l){return i[0]?Le:Ne}let r=n(t),o=r(t);return{c(){e=g("div"),o.c()},m(i,l){p(i,e,l),o.m(e,null)},p(i,[l]){r===(r=n(i))&&o?o.p(i,l):(o.d(1),o=r(i),o&&(o.c(),o.m(e,null)))},i:m,o:m,d(i){i&&h(e),o.d()}}}function He(t,e,n){let{id:r}=e,o;return le(async()=>{if(!o){const i=await fetch(`/api/photos/${r}`);n(0,o=await i.json())}}),t.$$set=i=>{"id"in i&&n(1,r=i.id)},[o,r]}class Xe extends j{constructor(e){super(),B(this,e,He,Re,R,{id:1})}}function Be(t){let e,n;return e=new Oe({}),{c(){U(e.$$.fragment)},m(r,o){H(e,r,o),n=!0},p:m,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function je(t){let e,n;return e=new Xe({props:{id:t[0]}}),{c(){U(e.$$.fragment)},m(r,o){H(e,r,o),n=!0},p(r,o){const i={};o&1&&(i.id=r[0]),e.$set(i)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function We(t){let e,n,r,o;const i=[je,Be],l=[];function c(s,u){var f;return(f=s[0])!=null&&f.length?0:1}return n=c(t),r=l[n]=i[n](t),{c(){e=g("main"),r.c(),d(e,"class","svelte-1tyzdic")},m(s,u){p(s,e,u),l[n].m(e,null),o=!0},p(s,[u]){let f=n;n=c(s),n===f?l[n].p(s,u):(ye(),k(l[f],1,1,()=>{l[f]=null}),ve(),r=l[n],r?r.p(s,u):(r=l[n]=i[n](s),r.c()),S(r,1),r.m(e,null))},i(s){o||(S(r),o=!0)},o(s){k(r),o=!1},d(s){s&&h(e),l[n].d()}}}function De(t,e,n){let{url:r=""}=e,{photoIdParam:o=null}=e;addEventListener("DOMContentLoaded",()=>{const c=new URLSearchParams(window.location.search);n(0,o=c.get("photo"));const s=document.getElementsByTagName("body")[0],[u,f]=l();s.style.backgroundColor=u,s.style.color=f});const i=new Map([[0,["#bd1818","white"]],[12,["#ffffaa","brown"]],[16,["#18BD70","black"]],[20,["#A7A7F3","white"]]]);function l(){let c="",s="";const f=new Date().getHours();for(let[a,[$,w]]of i)if(f>=a)c=$,s=w;else break;return[c,s]}return t.$$set=c=>{"url"in c&&n(1,r=c.url),"photoIdParam"in c&&n(0,o=c.photoIdParam)},[o,r]}class Fe extends j{constructor(e){super(),B(this,e,De,We,R,{url:1,photoIdParam:0})}}new Fe({target:document.getElementById("app")});
